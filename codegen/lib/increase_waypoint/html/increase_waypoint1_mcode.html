<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%% Increase waypoint</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% waypoint = [22.0000,120.0009;22.0001,120.0007];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">waypoint_add</span>,<span class="var type1" id="S3T2U4">waypoint_add_amount</span>] = increase_waypoint(<span class="var type1" id="S4T3U7">waypoint</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% waypoint = [22.0001,120.0001;22.0004,120.0006];</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T2:U4"><span class="var type1" id="S5T2U10">group</span> = <span class="mxinfo " id="T2:U6">size(<span class="var type1" id="S4T3U13">waypoint</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T2:U8"><span class="var type1" id="S7T2U17">step_accu</span> = <span class="mxinfo " id="T2:U10">0</span></span>; <span class="comment">% step accumulation</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T2:U11"><span class="var type1" id="S3T2U21">waypoint_add_amount</span> = <span class="mxinfo " id="T2:U13">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S8T2U25">i</span> = <span class="mxinfo " id="T2:U15">1:<span class="var type1" id="S5T2U29">group</span>-1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">    <span class="mxinfo " id="T2:U17"><span class="var type1" id="S9T2U33">step_temp</span> = <span class="mxinfo " id="T2:U19">floor(<span class="mxinfo " id="T2:U20"><span class="mxinfo " id="T2:U21">abs(<span class="mxinfo " id="T2:U22"><span class="mxinfo " id="T2:U23"><span class="var type1" id="S4T3U41">waypoint</span>(<span class="mxinfo " id="T4:U25"><span class="var type1" id="S8T2U43">i</span>+1</span>,<span class="mxinfo " id="T4:U27">2</span>)</span> - <span class="mxinfo " id="T2:U28"><span class="var type1" id="S4T3U47">waypoint</span>(<span class="var type1" id="S8T2U48">i</span>,<span class="mxinfo " id="T2:U31">2</span>)</span></span>)</span>*<span class="mxinfo " id="T2:U32">10000</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T2:U33"><span class="var type1" id="S3T2U53">waypoint_add_amount</span> = <span class="mxinfo " id="T2:U35"><span class="var type1" id="S9T2U55">step_temp</span> + <span class="var type1" id="S3T2U56">waypoint_add_amount</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T2:U38"><span class="var type1" id="S3T2U59">waypoint_add_amount</span> = <span class="mxinfo " id="T2:U40"><span class="var type1" id="S5T2U61">group</span> + <span class="var type1" id="S3T2U62">waypoint_add_amount</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T1:U43"><span class="var type1" id="S2T1U65">waypoint_add</span> = <span class="mxinfo " id="T1:U45">zeros(<span class="var type1" id="S3T2U68">waypoint_add_amount</span>,<span class="mxinfo " id="T2:U47">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S8T2U72">i</span> = <span class="mxinfo " id="T2:U49">1:<span class="var type1" id="S5T2U76">group</span>-1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo " id="T5:U51"><span class="var type1" id="S13T5U80">minus_latlon</span> = <span class="mxinfo " id="T5:U53"><span class="mxinfo " id="T5:U54"><span class="var type1" id="S4T3U83">waypoint</span>(<span class="mxinfo " id="T4:U56"><span class="var type1" id="S8T2U85">i</span>+1</span>,<span class="mxinfo " id="T6:U58">:</span>)</span> - <span class="mxinfo " id="T5:U59"><span class="var type1" id="S4T3U89">waypoint</span>(<span class="var type1" id="S8T2U90">i</span>,<span class="mxinfo " id="T6:U62">:</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">    <span class="mxinfo " id="T2:U63"><span class="var type1" id="S14T2U94">slope</span> = <span class="mxinfo " id="T2:U65">abs(<span class="mxinfo " id="T2:U66"><span class="mxinfo " id="T2:U67"><span class="var type1" id="S13T5U99">minus_latlon</span>(<span class="mxinfo " id="T4:U69">1</span>)</span>/<span class="mxinfo " id="T2:U70"><span class="var type1" id="S13T5U102">minus_latlon</span>(<span class="mxinfo " id="T4:U72">2</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">    <span class="mxinfo " id="T2:U73"><span class="var type1" id="S15T2U106">steps</span> = <span class="mxinfo " id="T2:U75">abs(<span class="mxinfo " id="T2:U76">floor(<span class="mxinfo " id="T2:U77"><span class="mxinfo " id="T2:U78"><span class="var type1" id="S13T5U113">minus_latlon</span>(<span class="mxinfo " id="T4:U80">2</span>)</span>*<span class="mxinfo " id="T2:U81">10000</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S16T2U118">j</span> = <span class="mxinfo " id="T2:U83">0</span>:<span class="mxinfo " id="T2:U84"><span class="var type1" id="S15T2U122">steps</span>-<span class="mxinfo " id="T2:U86">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T2:U87"><span class="mxinfo " id="T2:U88"><span class="var type1" id="S2T1U127">waypoint_add</span>(<span class="mxinfo " id="T2:U90"><span class="mxinfo " id="T2:U91"><span class="var type1" id="S16T2U130">j</span>+<span class="mxinfo " id="T2:U93">1</span></span>+<span class="var type1" id="S7T2U132">step_accu</span></span>,<span class="mxinfo " id="T2:U95">2</span>)</span> = <span class="mxinfo " id="T2:U96"><span class="mxinfo " id="T2:U97"><span class="var type1" id="S4T3U136">waypoint</span>(<span class="var type1" id="S8T2U137">i</span>,<span class="mxinfo " id="T2:U100">2</span>)</span> + <span class="mxinfo " id="T2:U101"><span class="mxinfo " id="T2:U102"><span class="mxinfo " id="T2:U103">0.0001</span>*<span class="var type1" id="S16T2U142">j</span></span>*<span class="mxinfo " id="T2:U105">sign(<span class="mxinfo " id="T2:U106"><span class="var type1" id="S13T5U146">minus_latlon</span>(<span class="mxinfo " id="T4:U108">2</span>)</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">        <span class="mxinfo " id="T2:U109"><span class="mxinfo " id="T2:U110"><span class="var type1" id="S2T1U151">waypoint_add</span>(<span class="mxinfo " id="T2:U112"><span class="mxinfo " id="T2:U113"><span class="var type1" id="S16T2U154">j</span>+<span class="mxinfo " id="T2:U115">1</span></span>+<span class="var type1" id="S7T2U156">step_accu</span></span>,<span class="mxinfo " id="T2:U117">1</span>)</span> = <span class="mxinfo " id="T2:U118"><span class="mxinfo " id="T2:U119"><span class="var type1" id="S4T3U160">waypoint</span>(<span class="var type1" id="S8T2U161">i</span>,<span class="mxinfo " id="T2:U122">1</span>)</span> + <span class="mxinfo " id="T2:U123"><span class="mxinfo " id="T2:U124"><span class="mxinfo " id="T2:U125"><span class="var type1" id="S14T2U166">slope</span>*<span class="mxinfo " id="T2:U127">0.0001</span></span>*<span class="var type1" id="S16T2U168">j</span></span>*<span class="mxinfo " id="T2:U129">sign(<span class="mxinfo " id="T2:U130"><span class="var type1" id="S13T5U172">minus_latlon</span>(<span class="mxinfo " id="T4:U132">1</span>)</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T2:U133"><span class="var type1" id="S7T2U176">step_accu</span> = <span class="mxinfo " id="T2:U135"><span class="var type1" id="S15T2U178">steps</span> + <span class="var type1" id="S7T2U179">step_accu</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T5:U138"><span class="mxinfo " id="T5:U139"><span class="var type1" id="S2T1U183">waypoint_add</span>(<span class="mxinfo " id="T2:U141"><span class="mxinfo " id="T2:U142">1</span>+<span class="var type1" id="S7T2U186">step_accu</span></span>,<span class="mxinfo " id="T6:U144">:</span>)</span> = <span class="mxinfo " id="T5:U145"><span class="var type1" id="S4T3U189">waypoint</span>(<span class="var type1" id="S5T2U190">group</span>,<span class="mxinfo " id="T6:U148">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
