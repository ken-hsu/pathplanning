<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="24,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%% Increase waypoint</span></span></span>
<span class="srcline"><span class="lineno"><a href="24,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% waypoint = [22.0000,120.0009;22.0001,120.0007];</span></span></span>
<span class="srcline"><span class="lineno"><a href="24,3" id="srcline3"> 3</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T2U3">waypoint_add</span>,<span class="var type1" id="S3T3U4">waypoint_add_amount</span>] = increase_waypoint(<span class="var type1" id="S4T4U7">waypoint</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="24,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% waypoint = [22.0001,120.0001;22.0004,120.0006];</span></span></span>
<span class="srcline"><span class="lineno"><a href="24,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T3:U4"><span class="var type1" id="S5T3U10">group</span> = <span class="mxinfo " id="T3:U6">size(<span class="var type1" id="S4T4U13">waypoint</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T3:U8"><span class="var type1" id="S7T3U17">step_accu</span> = <span class="mxinfo " id="T3:U10">0</span></span>; <span class="comment">% step accumulation</span></span></span>
<span class="srcline"><span class="lineno"><a href="24,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T3:U11"><span class="var type1" id="S3T3U21">waypoint_add_amount</span> = <span class="mxinfo " id="T3:U13">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,8" id="srcline8"> 8</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S8T3U25">i</span> = <span class="mxinfo " id="T3:U15">1</span>:<span class="mxinfo " id="T3:U16"><span class="var type1" id="S5T3U29">group</span>-<span class="mxinfo " id="T3:U18">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="24,9" id="srcline9"> 9</a></span><span class="line">    <span class="mxinfo " id="T3:U19"><span class="var type1" id="S9T3U33">step_temp</span> = <span class="mxinfo " id="T3:U21">floor(<span class="mxinfo " id="T3:U22"><span class="mxinfo " id="T3:U23">abs(<span class="mxinfo " id="T3:U24"><span class="mxinfo " id="T3:U25"><span class="var type1" id="S4T4U41">waypoint</span>(<span class="mxinfo " id="T3:U27"><span class="var type1" id="S8T3U43">i</span>+<span class="mxinfo " id="T3:U29">1</span></span>,<span class="mxinfo " id="T6:U30">2</span>)</span> - <span class="mxinfo " id="T3:U31"><span class="var type1" id="S4T4U47">waypoint</span>(<span class="var type1" id="S8T3U48">i</span>,<span class="mxinfo " id="T3:U34">2</span>)</span></span>)</span>*<span class="mxinfo " id="T3:U35">10000</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T3:U36"><span class="var type1" id="S3T3U53">waypoint_add_amount</span> = <span class="mxinfo " id="T3:U38"><span class="var type1" id="S9T3U55">step_temp</span> + <span class="var type1" id="S3T3U56">waypoint_add_amount</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,11" id="srcline11">11</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="24,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T3:U41"><span class="var type1" id="S3T3U59">waypoint_add_amount</span> = <span class="mxinfo " id="T3:U43"><span class="var type1" id="S5T3U61">group</span> + <span class="var type1" id="S3T3U62">waypoint_add_amount</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T2:U46"><span class="potentialdiff PD4"><span class="var type1" id="S2T2U65">waypoint_add</span> = <span class="mxinfo " id="T2:U48">zeros(<span class="mxinfo " id="T3:U49"><span class="var type1" id="S3T3U68"><span class="potentialdiff PD4">waypoint_add_amount</span></span></span>,<span class="mxinfo " id="T3:U50">2</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,14" id="srcline14">14</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S8T3U72">i</span> = <span class="mxinfo " id="T3:U52">1</span>:<span class="mxinfo " id="T3:U53"><span class="var type1" id="S5T3U76">group</span>-<span class="mxinfo " id="T3:U55">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="24,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo " id="T20:U56"><span class="var type1" id="S13T20U80">minus_latlon</span> = <span class="mxinfo " id="T20:U58"><span class="mxinfo " id="T20:U59"><span class="var type1" id="S4T4U83">waypoint</span>(<span class="mxinfo " id="T3:U61"><span class="var type1" id="S8T3U85">i</span>+<span class="mxinfo " id="T3:U63">1</span></span>,<span class="mxinfo " id="T21:U64">:</span>)</span> - <span class="mxinfo " id="T20:U65"><span class="var type1" id="S4T4U89">waypoint</span>(<span class="var type1" id="S8T3U90">i</span>,<span class="mxinfo " id="T21:U68">:</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,16" id="srcline16">16</a></span><span class="line">    <span class="mxinfo " id="T3:U69"><span class="var type1" id="S14T3U94">slope</span> = <span class="mxinfo " id="T3:U71">abs(<span class="mxinfo " id="T3:U72"><span class="mxinfo " id="T3:U73"><span class="var type1" id="S13T20U99">minus_latlon</span>(<span class="mxinfo " id="T6:U75">1</span>)</span>/<span class="mxinfo " id="T3:U76"><span class="var type1" id="S13T20U102">minus_latlon</span>(<span class="mxinfo " id="T6:U78">2</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,17" id="srcline17">17</a></span><span class="line">    <span class="mxinfo " id="T3:U79"><span class="var type1" id="S15T3U106">steps</span> = <span class="mxinfo " id="T3:U81">abs(<span class="mxinfo " id="T3:U82">floor(<span class="mxinfo " id="T3:U83"><span class="mxinfo " id="T3:U84"><span class="var type1" id="S13T20U113">minus_latlon</span>(<span class="mxinfo " id="T6:U86">2</span>)</span>*<span class="mxinfo " id="T3:U87">10000</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S16T3U118">j</span> = <span class="potentialdiff PD2"><span class="mxinfo " id="T3:U89">0</span>:<span class="mxinfo " id="T3:U90"><span class="var type1" id="S15T3U122">steps</span>-<span class="mxinfo " id="T3:U92">1</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="24,19" id="srcline19">19</a></span><span class="line">        <span class="mxinfo " id="T3:U93"><span class="mxinfo " id="T3:U94"><span class="potentialdiff PD3"><span class="potentialdiff PD4"><span class="var type1" id="S2T2U127">waypoint_add</span>(<span class="mxinfo " id="T3:U96"><span class="mxinfo " id="T3:U97"><span class="var type1" id="S16T3U130">j</span>+<span class="mxinfo " id="T3:U99">1</span></span>+<span class="var type1" id="S7T3U132">step_accu</span></span>,<span class="mxinfo " id="T3:U101">2</span>)</span></span></span> = <span class="mxinfo " id="T3:U102"><span class="mxinfo " id="T3:U103"><span class="var type1" id="S4T4U136">waypoint</span>(<span class="var type1" id="S8T3U137">i</span>,<span class="mxinfo " id="T3:U106">2</span>)</span> + <span class="mxinfo " id="T3:U107"><span class="mxinfo " id="T3:U108"><span class="mxinfo " id="T3:U109">0.0001</span>*<span class="var type1" id="S16T3U142">j</span></span>*<span class="mxinfo " id="T3:U111">sign(<span class="mxinfo " id="T3:U112"><span class="var type1" id="S13T20U146">minus_latlon</span>(<span class="mxinfo " id="T6:U114">2</span>)</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,20" id="srcline20">20</a></span><span class="line">        <span class="mxinfo " id="T3:U115"><span class="mxinfo " id="T3:U116"><span class="potentialdiff PD3"><span class="potentialdiff PD4"><span class="var type1" id="S2T2U151">waypoint_add</span>(<span class="mxinfo " id="T3:U118"><span class="mxinfo " id="T3:U119"><span class="var type1" id="S16T3U154">j</span>+<span class="mxinfo " id="T3:U121">1</span></span>+<span class="var type1" id="S7T3U156">step_accu</span></span>,<span class="mxinfo " id="T3:U123">1</span>)</span></span></span> = <span class="mxinfo " id="T3:U124"><span class="mxinfo " id="T3:U125"><span class="var type1" id="S4T4U160">waypoint</span>(<span class="var type1" id="S8T3U161">i</span>,<span class="mxinfo " id="T3:U128">1</span>)</span> + <span class="mxinfo " id="T3:U129"><span class="mxinfo " id="T3:U130"><span class="mxinfo " id="T3:U131"><span class="var type1" id="S14T3U166">slope</span>*<span class="mxinfo " id="T3:U133">0.0001</span></span>*<span class="var type1" id="S16T3U168">j</span></span>*<span class="mxinfo " id="T3:U135">sign(<span class="mxinfo " id="T3:U136"><span class="var type1" id="S13T20U172">minus_latlon</span>(<span class="mxinfo " id="T6:U138">1</span>)</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,21" id="srcline21">21</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="24,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T3:U139"><span class="var type1" id="S7T3U176">step_accu</span> = <span class="mxinfo " id="T3:U141"><span class="var type1" id="S15T3U178">steps</span> + <span class="var type1" id="S7T3U179">step_accu</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="24,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T20:U144"><span class="mxinfo " id="T20:U145"><span class="var type1" id="S2T2U183">waypoint_add</span>(<span class="mxinfo " id="T3:U147"><span class="potentialdiff PD3"><span class="potentialdiff PD4"><span class="mxinfo " id="T3:U148">1</span>+<span class="var type1" id="S7T3U186">step_accu</span></span></span></span>,<span class="mxinfo " id="T21:U150">:</span>)</span> = <span class="mxinfo " id="T20:U151"><span class="var type1" id="S4T4U189">waypoint</span>(<span class="var type1" id="S5T3U190">group</span>,<span class="mxinfo " id="T21:U154">:</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="24,25" id="srcline25">25</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
